# 16 NumPy 字节交换

数据以字节的形式存储在计算机内存中，而存储规则可分为两类，即小端字节序与大端字节序。在几乎所有的机器上，多字节对象都被存储为连续的字节序列。字节顺序，是跨越多字节的程序对象的存储规则。

- **大端模式：**指**数据的高字节保存在内存的低地址**中，而数据的低字节保存在内存的高地址中，这样的存储模式有点儿类似于把数据当作字符串顺序处理：地址由小向大增加，而数据从高位往低位放；这和我们的阅读习惯一致。
- **小端模式：**指**数据的高字节保存在内存的高地址**中，而数据的低字节保存在内存的低地址中，这种存储模式将地址的高低和数据位权有效地结合起来，高地址部分权值高，低地址部分权值低。

对于二进制数 0x12345678，假设从地址 0x4000 开始存放，在大端和小端模式下，它们的字节排列顺序，如下所示：

![](https://raw.githubusercontent.com/XuanhaoZhu98/image_hosting/main/img/202204222024673.gif)

图1：字节存储模式
小端存储后：0x78563412 大端存储后：0x12345678。

## numpy.ndarray.byteswap()

该函数将数组中每个元素的字节顺序进行大小端调换。示例如下：

```python
import numpy as np
a = np.array([1, 256, 8755], dtype = np.int16)
#数组a
print(a) 
#以16进制形式表示内存中的数据
print(list(map(hex, a))) 
#byteswap()函数通过传递True参数在适当的位置进行转换
#调用byteswap()函数
print(a.byteswap(True))
#十六进制形式
print(list(map(hex,a)))
```

输出结果：

```
[   1  256 8755]
['0x1', '0x100', '0x2233']

[  256     1 13090]
['0x100', '0x1', '0x3322']
```

